<!DOCTYPE html>
<html lang="en">

<head>
	<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
<meta name="theme-color" content="#00bbff"><link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-regular.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-italic.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-700.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-700italic.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-regular.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-italic.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-700.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-200.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-mono-v5-latin-regular.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-mono-v5-latin-italic.woff2" as="font" type="font/woff2" crossorigin/><link rel="stylesheet" href="/css/fonts.css" />
<link rel="stylesheet" href="/css/compose.css" />
<link rel="stylesheet" href="/css/prism.css" />
<link rel="stylesheet" href="/css/customize.css" />
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">
<title>
    Ulf Schneider – Developer and Agile Coach
</title>

<script>
    if (navigator.serviceWorker) {
        navigator.serviceWorker.register('/serviceworker.js')
            .catch(error => {
                console.error(error);
            });
        addEventListener("load", function () {
            if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({ "command": "trimCache" });
            }
        });
    }
</script>
</head>

<body><a id="top" tabindex="-1"></a>
	<header class="mrb-3 bg-base-background x breakout-r z-1 pdy-d1 lh-4 small">
	<nav><span class="inline-block mrr-d1">
						<a href="/" class="no-deco meta">Ulf Schneider</a>
					</span><ul class="reset inline-block mry-0"><li class="inline-block">
							<a class="no-deco meta" href="/reading/">Reading</a>
						</li><li class="inline-block">
							<a class="no-deco meta" href="/articles/">Articles</a>
						</li><li class="inline-block">
							<a class="no-deco meta" href="/tools/">Tools</a>
						</li><li class="inline-block">
							<a class="no-deco meta" href="/journal/">Journal</a>
						</li><li class="inline-block meta heading-color bold">Search</li></ul>
</nav>
</header>

	<main class="x indent word-wrap default"><div class="breakout-l mrb-1">
			<div class="title no-indent"><h1 class="lh-2 fs-2 md:fs-4 md:lh-1 mrb-d2">Search</h1><aside class="lh-2 small meta mrt-d2"><time class="no-wrap">May 15, 2020</time></aside></div>
		</div>
<link rel="preload" as="fetch" href="/excerpt-index.json" crossorigin="anonymous">
<link rel="preload" as="fetch" href="/post-search-index.json" crossorigin="anonymous">

<script>
    function submitQuery(event) {
        event.preventDefault();
        let query = event.target['search-query'].value;
        if (query && query.trim()) {
            location.href = '/search/?query=' + encodeURIComponent(query.trim());
        } else {
            location.href = '/search/';
        }
    }
    addEventListener('keydown', event => {
        if (event.keyCode == 190) {
            // . pressed
            document.querySelector('#search-query').focus();
            event.preventDefault();
        }
    });
</script>
<form class="mry" onsubmit="submitQuery(event);">
    <label for="search-query" class="small">Search <em>ulf.codes,</em> press . to focus:</label>
    <div class="flex mxw-sm">
        <input id="search-query"  class="w-100" type="text"/>
        <input type="submit" style="border-top-left-radius: 0px; border-bottom-left-radius: 0px;" value="Search" />
    </div>
</form>

<div id="search-results"></div>
<script src="https://unpkg.com/lunr/lunr.js"></script>
<script>

    const SEARCH_RESULTS_ID = 'search-results';
    const SEARCH_QUERY_ID = 'search-query';
    var searchIndex,
        friendlyMap;

    function getParameterByName(name, url) {
        url = url
            ? url
            : location.href;
        name = name.replace(/[\[\]]/g, '\\$&');
        let regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)');
        let results = regex.exec(url);
        if (!results) {
            return null;
        }
        if (!results[2]) {
            return '';
        }
        return decodeURIComponent(results[2].replace(/\+/g, ' '));
    }

    function removeChildren(parent) {
        if (parent) {
            let child = parent.lastElementChild;
            while (child) {
                parent.removeChild(child);
                child = parent.lastElementChild;
            }
        }
    }

    function formatDate(date) {
        const months = [
            'January',
            'February',
            'March',
            'April',
            'May',
            'June',
            'July',
            'August',
            'September',
            'October',
            'November',
            'December'
        ];
        let parts = date.split('-');
        let year = parseInt(parts[0]);
        let month = parseInt(parts[1]);
        let day = parseInt(parts[2]);

        return months[month - 1] + ' ' + day + ', ' + year;
    }

    function printResultEntry(parent, entry) {
        if (parent) {
            let friend = friendlyMap.get(entry.ref);

            let article = document.createElement('article');
            parent.appendChild(article);

            if (friend.title && friend.title != 'notitle') {
                let title = document.createElement('h2');
                title.classList = 'mry-0'
                article.appendChild(title);
                let linkToArticle = document.createElement('a');
                linkToArticle.href = entry.ref;
                linkToArticle.innerHTML = friend.title;
                title.appendChild(linkToArticle);
            }

            if (friend.refer) {
                let refer = document.createElement('div');
                refer.classList = 'small meta';
                refer.innerHTML = friend.refer;
                article.appendChild(refer);
            }

            if (friend.abstract || friend.subtitle || friend.excerpt || friend.content) {
                let excerpt = document.createElement('p');
                article.appendChild(excerpt);
                excerpt.classList = 'inline';
                let text = friend.abstract || friend.subtitle || friend.excerpt;
                if (text) {
                    excerpt.innerHTML = text;
                } else {
                    excerpt.innerHTML = friend
                        .content
                        .split(' ')
                        .slice(0, 25)
                        .join(' ') + ' …';
                }
            }

            if (friend.author || friend.date) {
                let aside = document.createElement('aside');
                aside.classList = "meta small inline-block";
                article.innerHTML += ' ';
                article.appendChild(aside);
                aside.innerHTML = '<span aria-hidden="true"> — </span>';

                if (friend.author) {
                    let author = document.createElement('span');
                    author.innerHTML = 'By ' + friend.author;
                    aside.appendChild(author);
                }

                if (friend.date) {
                    if (friend.author) {
                        aside.innerHTML += '<span aria-hidden="true"> · </span>';
                    }
                    let date = document.createElement('time');
                    date.innerHTML += formatDate(friend.date);
                    aside.appendChild(date);
                }
            }

            if (!friend.title || friend.title == 'notitle') {
                let linkToArticle = document.createElement('a');
                linkToArticle.href = entry.ref;
                linkToArticle.classList = 'block small meta';
                linkToArticle.innerHTML = 'Read the entire article →';
                article.appendChild(linkToArticle);
            }
        }
    }

    function printHeading(resultSet, query) {
        let heading = document.getElementsByTagName('h1');
        if (heading.length) {
            if (resultSet.length) {
                heading[0].innerHTML = 'Search results for "' + query + '"';
            } else {
                heading[0].innerHTML = 'No search results for "' + query + '"';
            }
        }
    }

    function printResultCount(searchResults, resultSet, query) {
        let count = document.createElement('div');
        if (resultSet.length == 0) {
            count.innerHTML = 'Your search for "' + query + '" did not return any results.'
        } else {
            count.innerHTML = resultSet.length + ' results:';
        }
        count.classList = "small meta mrb";
        searchResults.append(count);
    }

    function printSearchResults(resultSet, query) {
        let searchResults = document.getElementById(SEARCH_RESULTS_ID);
        if (!searchResults) {
            console.error('The page does not have a DOM element with id=' + SEARCH_RESULTS_ID);
            return;
        }
        removeChildren(searchResults);
        printHeading(resultSet, query);
        printResultCount(searchResults, resultSet, query);
        if (resultSet.length) {
            for (let entry of resultSet) {
                printResultEntry(searchResults, entry);
            }
        }
    }

    function search(query) {
        let resultSet = [];
        if (query && query.trim().length) {
            resultSet = searchIndex.search(query);
        }
        printSearchResults(resultSet, query);
    }

    addEventListener('load', function (event) {
        fetch('/post-search-index.json', {credentials: 'same-origin'})
            .then(response => {
                return response.json()
            })
            .then(rawIndex => {
                searchIndex = lunr
                    .Index
                    .load(rawIndex);
                return fetch('/excerpt-index.json', {credentials: 'same-origin'});
            })
            .then(response => {
                return response.json();
            })
            .then(contentIndex => {

                friendlyMap = new Map();
                for (let item of contentIndex) {
                    friendlyMap.set(item.id, item);
                }

                let query = getParameterByName('query');
                let input = document.getElementById(SEARCH_QUERY_ID);
                if (input) {
                    input.value = query;
                }

                if (query) {
                    search(query);
                }
            })
            .catch(error => {
                console.error('Failure when creating search index ' + error);
            });
    });
</script>
<div>
    <!-- posts -->
    <style>
        article+article {
            margin-top: var(--space-2);
        }
    </style></div></main>

	<div class="x breakout-r">
		<footer class="mrt-1 mrb-2 lh-4 small"><nav>
		<ul class="mry-0 reset">
			<li class="inline-block"><a href="/feed.xml/" class="small no-deco meta">RSS</a></li><li class="inline-block"><a href="/colophon/" class="small no-deco meta">Colophon</a></li><li class="inline-block"><a href="/ownership/" class="small no-deco meta">Ownership</a></li><li id="load-time" class="inline-block small meta"></li>
		</ul>
		<a href="#top" id="back-to-top" style="display:none" class="small no-deco meta">Back to top</a>
<script>
    function maintainBackToTopVisibility() {
        let windowHeight = window.innerHeight;
        let documentHeight = document.body.clientHeight;
        let backToTop = document.getElementById('back-to-top');

        if (windowHeight * 1.5 < documentHeight) {
            backToTop.style.display = 'inline';
        } else {
            backToTop.style.display = 'none';
        }
    }

    maintainBackToTopVisibility();
    addEventListener('scroll', event => maintainBackToTopVisibility());
    addEventListener('resize', event => maintainBackToTopVisibility());

</script>
	</nav>
</footer>
	</div>

	<script src="/js/fit-vids.js"></script>
	<script src="/js/measure-load-time.js"></script>
</body>

</html>