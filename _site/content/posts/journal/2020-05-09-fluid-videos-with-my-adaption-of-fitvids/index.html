<!DOCTYPE html>
<html lang="en">

<head>
	<link rel="manifest" href="/manifest.json">
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
<meta name="theme-color" content="#00bbff"><link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-regular.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-italic.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-700.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-serif-v8-latin-700italic.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-regular.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-italic.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-700.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-sans-v7-latin-200.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-mono-v5-latin-regular.woff2" as="font" type="font/woff2" crossorigin/>
<link rel="preload" href="/fonts/ibm-plex-mono-v5-latin-italic.woff2" as="font" type="font/woff2" crossorigin/><link rel="stylesheet" href="/css/fonts.css" />
<link rel="stylesheet" href="/css/compose.css" />
<link rel="stylesheet" href="/css/prism.css" />
<link rel="stylesheet" href="/css/customize.css" />
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width initial-scale=1">
<title>
    Ulf Schneider – Developer and Agile Coach
</title>

<script>
    if (navigator.serviceWorker) {
        navigator.serviceWorker.register('/serviceworker.js')
            .catch(error => {
                console.error(error);
            });
        addEventListener("load", function () {
            if (navigator.serviceWorker.controller) {
                navigator.serviceWorker.controller.postMessage({ "command": "trimCache" });
            }
        });
    }
</script>
</head>

<body><a id="top" tabindex="-1"></a>
	<header class="mrb-3 bg-base-background x breakout-r z-1 pdy-d1 lh-4 small">
	<nav><span class="inline-block mrr-d1">
						<a href="/" class="no-deco meta">Ulf Schneider</a>
					</span><ul class="reset inline-block mry-0"><li class="inline-block">
							<a class="no-deco meta" href="/reading/">Reading</a>
						</li><li class="inline-block">
							<a class="no-deco meta" href="/articles/">Articles</a>
						</li><li class="inline-block">
							<a class="no-deco meta" href="/tools/">Tools</a>
						</li><li class="inline-block">
							<a class="no-deco meta" href="/journal/">Journal</a>
						</li><li class="inline-block">
							<a class="no-deco meta" href="/search/">Search</a>
						</li></ul>
</nav>
</header>

	<main class="x indent word-wrap default"><div class="breakout-l mrb-1">
			<div class="title no-indent"><h1 class="lh-2 fs-2 md:fs-4 md:lh-1 mrb-d2">Fluid videos with my adaption of FitVids</h1><aside class="lh-2 small meta mrt-d2"><time class="no-wrap">May  9, 2020</time></aside></div>
		</div><p>Embedded videos are not automatically responsive or fluid. They come with a fixed setting for width and height. To make them responsive while keeping aspect ratio, typically they are embedded into a wrapper element. The wrapper receives some clever padding and positioning, and as a last step the fixed dimensions are removed from the video. The technique has been described by Thierry Koblentz in his <em>A List Apart</em> article &quot;<a href="https://alistapart.com/article/creating-intrinsic-ratios-for-video/">Creating Intrinsic Ratios for Video</a>&quot; in 2009.</p>
<p>To achieve this kind of manipulation automatically for all videos on your website, you have to run a script. Therefore I came up with my own tiny version of the <a href="http://fitvidsjs.com">FitVids</a> script. FitVids is Dave Rupert´s implementation of the described algorithm. It has jQuery as a dependency, which I wanted to avoid. Therefore I picked up Dave´s code and simplified it to my needs. No dependencies anymore.</p>
<p>For correct initial rendering on small screens, <strong>it is important to set a max-width for IFrames in your CSS,</strong> otherwise your text might be rendered too tall on those small screens. That´s because initially, before the script does its work, the IFrame might have too much width and breaks your layout. Setting it to a max-width of 100% ensures it stays within desired limits. However, the adjusting script needs to run afterwards, because otherwise the aspect ratio of the videos would be broken.</p>
<figure>
<figcaption>Adjust your CSS</figcaption>
<pre class="language-css"><code class="language-css"><span class="token selector">iframe</span> <span class="token punctuation">{</span><br>  <span class="token property">max-width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span><br>  <span class="token punctuation">}</span></code></pre>
</figure>
<p>Place the script on your website by putting it into a file, e.g. <code>fit-vids.js</code>, and reference it via <code>&lt;script src=&quot;/.../fit-vids.js&quot;&gt;&lt;/script&gt;</code>. Here it is:</p>
<figure class="breakout-r">
<figcaption>My adoption of FitVids</figcaption>
<pre class="language-js"><code class="language-js"><span class="token comment">/*<br>A tailored version of FitVids, <br>which is originally created by Dave Rupert (davatron5000).<br>FitVids again, is based on https://css-tricks.com/fluid-width-video/ <br>by Chris Coyier, which borrows its basic idea from Thierry Koblentz<br>https://alistapart.com/article/creating-intrinsic-ratios-for-video/<br>*/</span><br><br><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> <span class="token parameter">event</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>    <span class="token comment">// List of Video Vendors embeds you want to support</span><br>    <span class="token keyword">const</span> players <span class="token operator">=</span> <span class="token punctuation">[</span><br>        <span class="token string">'iframe[src*="player.vimeo.com"]'</span><span class="token punctuation">,</span><br>        <span class="token string">'iframe[src*="youtube.com"]'</span><span class="token punctuation">,</span><br>        <span class="token string">'iframe[src*="youtube-nocookie.com"]'</span><span class="token punctuation">,</span><br>        <span class="token string">'iframe[src*="kickstarter.com"][src*="video.html"]'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">]</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Select videos</span><br>    <span class="token keyword">const</span> fitVids <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span>players<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">','</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// If there are videos on the page...</span><br>    <span class="token keyword">if</span> <span class="token punctuation">(</span>fitVids<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>        <span class="token comment">// Loop through videos</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> vid <span class="token keyword">of</span> fitVids<span class="token punctuation">)</span> <span class="token punctuation">{</span><br><br>            <span class="token comment">// Get Video Information            </span><br>            <span class="token keyword">var</span> width <span class="token operator">=</span> vid<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">var</span> height <span class="token operator">=</span> vid<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">var</span> aspectRatio <span class="token operator">=</span> height <span class="token operator">/</span> width<span class="token punctuation">;</span><br>            <span class="token keyword">var</span> parentDiv <span class="token operator">=</span> vid<span class="token punctuation">.</span>parentNode<span class="token punctuation">;</span><br><br>            <span class="token comment">// Wrap it in a DIV</span><br>            <span class="token keyword">var</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'relative'</span><span class="token punctuation">;</span><br>            div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>paddingBottom <span class="token operator">=</span> aspectRatio <span class="token operator">*</span> <span class="token number">100</span> <span class="token operator">+</span> <span class="token string">'%'</span><span class="token punctuation">;</span><br>            div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100%'</span><span class="token punctuation">;</span><br>            div<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br><br>            vid<span class="token punctuation">.</span>style<span class="token punctuation">.</span>position <span class="token operator">=</span> <span class="token string">'absolute'</span><span class="token punctuation">;</span><br>            vid<span class="token punctuation">.</span>style<span class="token punctuation">.</span>top <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br>            vid<span class="token punctuation">.</span>style<span class="token punctuation">.</span>left <span class="token operator">=</span> <span class="token string">'0'</span><span class="token punctuation">;</span><br>            vid<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> <span class="token string">'100%'</span><span class="token punctuation">;</span><br>            vid<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> <span class="token string">'100%'</span><span class="token punctuation">;</span><br><br>            parentDiv<span class="token punctuation">.</span><span class="token function">insertBefore</span><span class="token punctuation">(</span>div<span class="token punctuation">,</span> vid<span class="token punctuation">)</span><span class="token punctuation">;</span><br>            vid<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            div<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>vid<span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>            <span class="token comment">// Clear height/width from fitVid</span><br>            vid<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'height'</span><span class="token punctuation">)</span><br>            vid<span class="token punctuation">.</span><span class="token function">removeAttribute</span><span class="token punctuation">(</span><span class="token string">'width'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre>
</figure>
</main>

	<div class="x breakout-r">
		<footer class="mrt-1 mrb-2 lh-4 small"><nav>
		<ul class="mry-0 reset">
			<li class="inline-block"><a href="/feed.xml/" class="small no-deco meta">RSS</a></li><li class="inline-block"><a href="/colophon/" class="small no-deco meta">Colophon</a></li><li class="inline-block"><a href="/ownership/" class="small no-deco meta">Ownership</a></li><li id="load-time" class="inline-block small meta"></li>
		</ul>
		<a href="#top" id="back-to-top" style="display:none" class="small no-deco meta">Back to top</a>
<script>
    function maintainBackToTopVisibility() {
        let windowHeight = window.innerHeight;
        let documentHeight = document.body.clientHeight;
        let backToTop = document.getElementById('back-to-top');

        if (windowHeight * 1.5 < documentHeight) {
            backToTop.style.display = 'inline';
        } else {
            backToTop.style.display = 'none';
        }
    }

    maintainBackToTopVisibility();
    addEventListener('scroll', event => maintainBackToTopVisibility());
    addEventListener('resize', event => maintainBackToTopVisibility());

</script>
	</nav>
</footer>
	</div>

	<script src="/js/fit-vids.js"></script>
	<script src="/js/measure-load-time.js"></script>
</body>

</html>